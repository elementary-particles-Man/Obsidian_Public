@startuml
' VoV投稿の復元プロセス図（受信→検証→復元）
title VoV 投稿断片の復元フロー

start

:受信ノードが断片を受信;
if (全断片が揃った?) then (はい)
  :断片IDと順序で並び替え;
  :各断片のハッシュを検証;
  if (全て検証OK?) then (はい)
    :テキスト復元;
    :画像・動画・添付をポインタで再結合;
    :VoVPostオブジェクトを復元;
    :署名の検証を実施;
    if (署名OK?) then (はい)
      :意志フラグとともに投稿表示;
    else (いいえ)
      :復元失敗（署名不一致）;
    endif
  else (いいえ)
    :破損断片を報告・再リクエスト;
  endif
else (いいえ)
  :待機 or 他ピアから断片要求;
endif

stop
@enduml
